{"version":3,"sources":["webpack:///./template/photo-card.hbs","webpack:///./index.js","webpack:///./js/apiService.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop","apiService","this","searchQuery","page","fetchImages","fetch","BASE_URL","response","json","incrementPage","hits","resetPage","newQuery","refs","searchForm","document","querySelector","infoMessage","galleryContainer","loadMoreBtn","e","preventDefault","query","target","elements","value","onInfoMessage","hideLoadMoreBtn","clearImagesGallery","cards","length","appendImagesMarkUp","visibleLoadMoreBtn","stepScroll","pageYOffset","clientY","onScrollToScreen","insertAdjacentHTML","cardTpl","innerHTML","text","textContent","position","window","scrollTo","top","behavior","classList","add","remove","addEventListener"],"mappings":"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","file":"main.cdbec0fda280fe3e3d97.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"item\\\">\\r\\n  <div class=\\\"photo-card\\\">\\r\\n    <img class=\\\"photo-card-img\\\" src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"tags\") : depth0), depth0))\n    + \"\\\" />\\r\\n    <div class=\\\"stats\\\">\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">visibility</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">comment</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n    </div>\\r\\n  </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":25,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","import './styles.css';\r\nimport cardTpl from './template/photo-card.hbs';\r\nimport ApiServise from './js/apiService';\r\n\r\nconst apiService = new ApiServise;\r\n\r\nconst refs = {\r\n    searchForm: document.querySelector('#search-form'),\r\n    infoMessage:document.querySelector('.search-form-message'),\r\n    galleryContainer: document.querySelector('.gallery'),\r\n    loadMoreBtn: document.querySelector('.js-btn-more'),\r\n}\r\n\r\nrefs.searchForm.addEventListener('submit', onSearch);\r\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\r\n\r\nasync function onSearch(e) {\r\n    e.preventDefault();\r\n    apiService.query = e.target.elements.query.value;\r\n    apiService.resetPage();\r\n    onInfoMessage('');\r\n    hideLoadMoreBtn();\r\n    \r\n    if (apiService.query === '') {    // проверка на пустой запрос\r\n        clearImagesGallery();\r\n        onInfoMessage('Enter value for search');  \r\n        return\r\n    }\r\n    \r\n    const cards = await apiService.fetchImages();\r\n    \r\n    clearImagesGallery();\r\n\r\n    if (cards.length === 0) {    // проверка на неверный запрос\r\n        hideLoadMoreBtn();\r\n        onInfoMessage('Not found results, please change your search query');\r\n        return\r\n    }\r\n\r\n    appendImagesMarkUp(cards);\r\n\r\n    if (cards.length === 12) {   //проверка на наличие картинок для след загрузки\r\n        visibleLoadMoreBtn()\r\n    }\r\n}\r\n\r\nasync function onLoadMore(e) {\r\n    const cards = await apiService.fetchImages();\r\n    const stepScroll = pageYOffset+e.clientY-30;\r\n    \r\n    appendImagesMarkUp(cards)\r\n    onScrollToScreen(stepScroll);\r\n\r\n    if (cards.length < 12) {   //проверка на наличие картинок для след загрузки\r\n        hideLoadMoreBtn();\r\n    }\r\n};\r\n\r\nfunction appendImagesMarkUp(cards) {\r\n    refs.galleryContainer.insertAdjacentHTML('beforeend', cardTpl(cards));\r\n}\r\n\r\nfunction clearImagesGallery() {\r\n    refs.galleryContainer.innerHTML = '';\r\n}\r\n\r\nfunction onInfoMessage(text) {\r\n    refs.infoMessage.textContent = text;\r\n}\r\n\r\nfunction onScrollToScreen(position) {\r\n    window.scrollTo({ top: position, behavior:\"smooth\"})\r\n}\r\n\r\nfunction hideLoadMoreBtn() {\r\n    refs.loadMoreBtn.classList.add('is-hidden');   \r\n}    \r\n\r\nfunction visibleLoadMoreBtn() {\r\n    refs.loadMoreBtn.classList.remove('is-hidden');\r\n} \r\n","const BASE_URL = 'https://pixabay.com/api';\r\nconst API_KEY = '19030370-3b0ac62398e7506ebf605c4ab'\r\n\r\n\r\nexport default class ApiService {\r\n    constructor() {\r\n        this.searchQuery = '';\r\n        this.page = 1;\r\n}\r\n\r\n   async fetchImages() {\r\n    \r\n       const response = await fetch(`${BASE_URL}/?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${API_KEY}`);\r\n       const data = await response.json();\r\n       const cards = await data;\r\n            \r\n      this.incrementPage();\r\n            \r\n       \r\n       return data.hits\r\n    };\r\n\r\n    incrementPage() {\r\n        this.page += 1;\r\n    }\r\n    resetPage() {\r\n        this.page = 1;\r\n    }\r\n\r\n    get query() {\r\n      return this.searchQuery\r\n    };\r\n\r\n    set query(newQuery) {\r\n        this.searchQuery = newQuery;\r\n    }\r\n}"],"sourceRoot":""}